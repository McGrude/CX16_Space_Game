# Natural Space Object Generator — Specification & Documentation

This document defines the specifications, inputs, outputs, rules, and behavior of the **Natural Space Object Generator**, the second stage in the universe-generation pipeline for the Commander X16 space‑trading RPG.

This stage produces **natural celestial bodies** for each star system: planets, moons, and a single asteroid class.

---

# Overview

The Natural Space Object Generator:

1. Reads the **star_catalog.csv** file produced by the Star Map Generator.
2. For each system, deterministically generates between **0 and 5 natural objects**, except for Sol (ID 0), which is **fixed**.
3. Uses weighted probability distributions to create planets, moons, and large asteroids.
4. Produces a second CSV file: **system_objects.csv**.
5. Uses deterministic RNG seeding so all systems are stable and reproducible.
6. Creates simple but lore-friendly naming conventions for all natural objects.

This phase lays the astrophysical foundation before the later **civilization expansion** generator adds inhabited worlds, space stations, industrial sites, and human/civil names.

---

# Input Requirements

### **Input file: star_catalog.csv**

This file is produced by the Star Map Generator. Required columns:

```
id, proper
```

- **id** = system ID  
- **proper** = system name (real or synthetic)

All other star_catalog.csv columns are ignored by this script.

---

# Output File: system_objects.csv

A CSV containing all natural objects across all star systems.

### **Schema:**

```
system_id
object_id
name
class
parent_object_id
is_moon
```

Meaning:

| Field | Description |
|-------|-------------|
| **system_id** | ID of the star system (matches star_catalog.csv) |
| **object_id** | Index of object within the system (0–N) |
| **name** | Generated natural object name |
| **class** | Object type code (RP, DP, IC, GG, RM, IM, AS) |
| **parent_object_id** | Index of parent planet for moons; blank otherwise |
| **is_moon** | 1 if moon, 0 otherwise |

Example:

```
3,0,Helion Sector-17 I,RP,,0
3,1,Helion Sector-17 I-a,RM,0,1
3,2,Helion Sector-17 II,IC,,0
3,3,Helion Sector-17 Asteroid,AS,,0
```

---

# Sol System Special Case

System ID **0** is always Sol.

It always produces exactly four objects:

### **0: Earth (RP)**  
### **1: Luna (RM)** — moon of Earth  
### **2: Mars (RP)**  
### **3: Ceres (AS)**  

No randomization.  
No naming changes.  
No moons other than Luna.  
No gas giants, outer planets, or belts are included.

Civilization expansion may later rename or repurpose these objects.

---

# Natural Object Classes

The minimal taxonomy is intentionally simple and game‑friendly:

### **Planets**
- **RP** — Rocky Planet  
- **DP** — Desert Planet  
- **IC** — Ice Planet  
- **GG** — Gas Giant  

### **Moons**
- **RM** — Rocky Moon  
- **IM** — Icy Moon  

### **Asteroids**
- **AS** — Large Asteroid  

This is enough diversity for gameplay without overwhelming memory or gameplay design.

---

# Object Count Distribution

Each non-Sol system receives **0–5 natural objects**, chosen with:

| Objects | Chance |
|---------|--------|
| 0 | 10% |
| 1 | 25% |
| 2 | 30% |
| 3 | 20% |
| 4 | 10% |
| 5 | 5% |

---

# Planet Type Probability

Primary objects (planets and asteroids before moons) follow:

| Class | Probability |
|--------|-------------|
| RP | 60% |
| DP | 15% |
| IC | 15% |
| GG | 10% |

If a system has **two or more** primary planets, one may be replaced with a **Large Asteroid (AS)** with a 20% probability.

---

# Moon Generation Rules

Only planets may receive moons.

Maximum moons per class:

| Planet Type | Max Moons |
|-------------|------------|
| RP | 1 |
| DP | 1 |
| IC | 1 |
| GG | 3 |

Moon type probabilities:

### For rocky parents (RP, DP, IC)
- RM: 70%  
- IM: 30%

### For gas giants (GG)
- RM: 50%  
- IM: 50%

Moon names are generated by appending:

```
SystemName I-a
SystemName II-b
```

etc.

---

# Naming Rules

Names are based on the **system name** and the **ordering of primary objects**.

Primary objects (planets and asteroids) use Roman numerals:

```
Helion Sector-17 I
Helion Sector-17 II
Helion Sector-17 Asteroid
```

Moons use alphabetical suffixes:

```
Helion Sector-17 I-a
Helion Sector-17 I-b
```

Asteroids always end with the word “Asteroid”.

---

# Deterministic Generation

Each system uses a deterministic RNG seed computed from:

```
global_seed XOR (system_id * 0x9E3779B1)
```

This ensures:
- Same star_catalog.csv → same natural objects every run  
- No random drift  
- Save games remain stable  
- Civilization step can safely alter or rename objects later  

You may customize the seed using:

```
--seed 12345
```

---

# Command-Line Usage

Example:

```bash
python3 generate_system_objects.py   --input-stars star_catalog.csv   --output-objects system_objects.csv   --max-objects-per-system 5   --seed 42
```

### **Arguments**

| Argument | Description |
|----------|-------------|
| `--input-stars` | Path to star_catalog.csv |
| `--output-objects` | Output file path (default: system_objects.csv) |
| `--max-objects-per-system` | Maximum objects per system (default: 5) |
| `--seed` | Deterministic seed offset |

---

# Role in the Universe Generator Pipeline

This script is **Stage 1** of the universe:

- Stage 0 → Star systems  
- **Stage 1 → Natural celestial objects (this script)**  
- Stage 2 → Civilization expansion  
- Stage 3 → Trade networks, missions, NPCs  
- Stage 4 → History, factions, and timelines  

Civilization steps will rename or repurpose these objects, but will never delete the underlying natural bodies.

---

# Summary

The Natural Space Object Generator provides:

- A deterministic astrophysical foundation  
- Minimal but expressive natural object classes  
- Special handling for Sol  
- A universal second CSV for game import  
- A stable platform for adding colonies, stations, and civilizations  
